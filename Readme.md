Booking Service

Простая система бронирования мест на мероприятия. Позволяет создавать пользователей, создавать события и бронировать на них места. Один пользователь не может дважды забронировать одно и то же событие.


---

Как запустить

1. Клонируем репозиторий и заходим в папку проекта:



git clone <твоя-ссылка-на-репо>
cd server

2. Устанавливаем зависимости:



npm install

3. Настраиваем подключение к базе данных MySQL в utils/connect.js. Пример:



import { Sequelize } from "sequelize";

const sequelize = new Sequelize("booking", "root", "пароль", {
  host: "localhost",
  dialect: "mysql"
});

export default sequelize;



4. Создаем и синхронизируем таблицы базы данных (опционально):



import { syncDb } from "./models/index.js";
await syncDb();

5. Запускаем сервер:



npm run dev

По умолчанию сервер запускается на порту 3600.
Если всё прошло успешно, в консоли увидим:

server run on port 3600


---

Как использовать

1. Пользователи

Создать пользователя


POST /user/reg

Тело запроса:

{
  "username": "John"
}

Ответ:

{
  "message": "Аккаунт успешно создан!"
}

Получить всех пользователей


GET /user/

Ответ:

[
  { "id": 1, "uid": "uuid-1", "username": "John" }
]


---

2. Мероприятия

Создать мероприятие


POST /events/create

Тело запроса:

{
  "name": "Концерт",
  "total_seats": 100
}

Ответ:

{
  "message": "Успешно добавлено!",
  "event": { "id": 1, "name": "Концерт", "total_seats": 100 }
}

Получить все мероприятия


GET /events/

Ответ:

[
  { "id": 1, "name": "Концерт", "total_seats": 100 }
]


---

3. Бронирование

Забронировать место


POST /booking/reserve

Тело запроса:

{
  "event_id": 1,
  "user_id": "1"
}

Ответ (успех):

{
  "message": "Регистрация на мероприятие прошла успешно!"
}

Ответ (если пользователь уже забронировал):

{
  "message": "Вы уже записаны на это мероприятие"
}

Посмотреть все бронирования


GET /booking/

Ответ:

[
  { "id": 1, "event_id": 1, "user_id": "1", "created_at": "2025-10-15T20:00:00Z" }
]


---

Insomnia

Все основные запросы для работы с проектом уже добавлены в коллекцию Insomnia.
Вы можете просто импортировать её и сразу тестировать API без ручного написания запросов.


---

Сценарий использования

1. Создаём пользователя.


2. Создаём событие.


3. Пользователь бронирует место на событие.


4. Можно проверять список всех бронирований, чтобы убедиться, что дублирующихся записей нет.




---

Скрипты

В package.json есть команда для запуска в режиме разработки с nodemon:

npm run dev


---

Зависимости

express

sequelize

mysql2

uuid

nodemon

